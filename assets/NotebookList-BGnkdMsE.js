import{_ as L,s as j,r as F,o as S,c as m,a as o,b as f,d as z,e as i,t as u,u as k,w as n,f as y,g as a,h as D,i as c,j as v,F as I,k as P,E as g,l}from"./index-CDE2mo68.js";import{u as R}from"./notebooks-BqLDKMN-.js";const A={class:"notebook-container"},O={class:"header-bar"},q={key:2,class:"notebook-grid"},G={class:"card-header"},H={class:"title-box"},J=["title"],K={class:"card-content"},Q={class:"count-number"},U={class:"card-footer"},W={class:"date-text"},X={class:"actions"},Y=Object.assign({name:"NotebookList"},{__name:"NotebookList",setup(Z){const r=R(),{notebooks:_}=j(r),b=D(),d=F(!1),x=async()=>{try{d.value=!0,await r.getNotebooks()}catch(e){console.error("èŽ·å–ç¬”è®°æœ¬å¤±è´¥",e)}finally{d.value=!1}},w=e=>{b.push(`/note?notebookId=${e}`)};S(()=>{x()});const N=async()=>{try{const{value:e}=await g.prompt("è¯·è¾“å…¥ç¬”è®°æœ¬æ ‡é¢˜","åˆ›å»ºç¬”è®°æœ¬",{confirmButtonText:"åˆ›å»º",cancelButtonText:"å–æ¶ˆ",inputPattern:/^.{1,30}$/,inputErrorMessage:"æ ‡é¢˜ä¸èƒ½ä¸ºç©ºä¸”ä¸è¶…è¿‡30ä¸ªå­—ç¬¦"});await r.addNotebook(e),l.success("åˆ›å»ºæˆåŠŸï¼")}catch(e){e!=="cancel"&&e!=="close"&&l.error("åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•")}},C=async e=>{try{const{value:t}=await g.prompt("è¯·è¾“å…¥æ–°æ ‡é¢˜","ä¿®æ”¹ç¬”è®°æœ¬",{confirmButtonText:"ä¿å­˜",cancelButtonText:"å–æ¶ˆ",inputValue:e.title,inputPattern:/^.{1,30}$/,inputErrorMessage:"æ ‡é¢˜ä¸èƒ½ä¸ºç©ºä¸”ä¸è¶…è¿‡30ä¸ªå­—ç¬¦"});await r.updateNotebook(e.id,t),l.success("ä¿®æ”¹æˆåŠŸï¼")}catch(t){t!=="cancel"&&t!=="close"&&l.error("ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}},B=async e=>{try{await g.confirm(`ç¡®å®šè¦åˆ é™¤ç¬”è®°æœ¬ "${e.title}" å—ï¼Ÿé‡Œé¢çš„ç¬”è®°ä¹Ÿä¼šè¢«åˆ é™¤å“¦ï¼`,"åˆ é™¤è­¦å‘Š",{confirmButtonText:"ç¡®å®šåˆ é™¤",cancelButtonText:"æˆ‘å†æƒ³æƒ³",type:"warning"}),await r.deleteNotebook(e.id),l.success("åˆ é™¤æˆåŠŸ")}catch(t){t!=="cancel"&&t!=="close"&&l.error("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•")}};return(e,t)=>{const p=a("el-button"),T=a("el-skeleton"),E=a("el-empty"),$=a("el-card"),M=a("el-col"),V=a("el-row");return c(),m("div",A,[o("div",O,[o("h2",null,"ðŸ“š æˆ‘çš„ç¬”è®°æœ¬ ("+u(k(_).length)+")",1),i(p,{type:"primary",round:"",onClick:y(N,["prevent"])},{default:n(()=>[...t[0]||(t[0]=[o("i",{class:"iconfont icon-plus",style:{"margin-right":"5px"}},null,-1),v(" æ–°å»ºç¬”è®°æœ¬ ",-1)])]),_:1})]),d.value?(c(),f(T,{key:0,rows:3,animated:""})):z("",!0),!d.value&&k(_).length===0?(c(),f(E,{key:1,description:"è¿™é‡Œç©ºç©ºå¦‚ä¹Ÿï¼Œå¿«åŽ»åˆ›å»ºç¬¬ä¸€ä¸ªç¬”è®°æœ¬å§ï¼"})):(c(),m("div",q,[i(V,{gutter:20},{default:n(()=>[(c(!0),m(I,null,P(k(_),s=>(c(),f(M,{key:s.id,xs:24,sm:12,md:8,lg:6,style:{"margin-bottom":"20px"}},{default:n(()=>[i($,{class:"notebook-card",shadow:"hover",onClick:h=>w(s.id)},{default:n(()=>[o("div",G,[o("div",H,[t[1]||(t[1]=o("i",{class:"iconfont icon-notebook notebook-icon"},null,-1)),o("span",{class:"notebook-title",title:s.title},u(s.title),9,J)])]),o("div",K,[o("div",Q,u(s.noteCounts),1),t[2]||(t[2]=o("div",{class:"count-label"},"ç¯‡ç¬”è®°",-1))]),o("div",U,[o("span",W,u(s.createdAtFriendly),1),o("div",X,[i(p,{link:"",type:"primary",size:"small",onClick:y(h=>C(s),["stop"])},{default:n(()=>[...t[3]||(t[3]=[o("i",{class:"iconfont icon-edit"},null,-1),v(" ç¼–è¾‘ ",-1)])]),_:1},8,["onClick"]),i(p,{link:"",type:"danger",size:"small",onClick:y(h=>B(s),["stop"])},{default:n(()=>[...t[4]||(t[4]=[o("i",{class:"iconfont icon-trash"},null,-1),v(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]))])}}}),ot=L(Y,[["__scopeId","data-v-73a6590f"]]);export{ot as default};
