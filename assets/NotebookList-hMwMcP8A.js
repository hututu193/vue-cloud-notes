import{_ as L,s as j,r as F,o as S,c as p,a as o,b as m,d as z,e as r,t as d,u as f,w as n,f as k,g as a,h as D,i as l,j as y,F as I,k as P,E as v,l as g}from"./index-BeboNJFR.js";import{u as R}from"./notebooks-ahI-daUz.js";const A={class:"notebook-container"},O={class:"header-bar"},q={key:2,class:"notebook-grid"},G={class:"card-header"},H={class:"title-box"},J=["title"],K={class:"card-content"},Q={class:"count-number"},U={class:"card-footer"},W={class:"date-text"},X={class:"actions"},Y=Object.assign({name:"NotebookList"},{__name:"NotebookList",setup(Z){const c=R(),{notebooks:u}=j(c),b=D(),i=F(!1),x=async()=>{try{i.value=!0,await c.getNotebooks()}catch(e){console.error("èŽ·å–ç¬”è®°æœ¬å¤±è´¥",e)}finally{i.value=!1}},w=e=>{b.push(`/note?notebookId=${e}`)};S(()=>{x()});const N=async()=>{try{const{value:e}=await v.prompt("è¯·è¾“å…¥ç¬”è®°æœ¬æ ‡é¢˜","åˆ›å»ºç¬”è®°æœ¬",{confirmButtonText:"åˆ›å»º",cancelButtonText:"å–æ¶ˆ",inputPattern:/^.{1,30}$/,inputErrorMessage:"æ ‡é¢˜ä¸èƒ½ä¸ºç©ºä¸”ä¸è¶…è¿‡30ä¸ªå­—ç¬¦"});await c.addNotebook(e)}catch(e){e!=="cancel"&&e!=="close"&&g.error("åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•")}},C=async e=>{try{const{value:t}=await v.prompt("è¯·è¾“å…¥æ–°æ ‡é¢˜","ä¿®æ”¹ç¬”è®°æœ¬",{confirmButtonText:"ä¿å­˜",cancelButtonText:"å–æ¶ˆ",inputValue:e.title,inputPattern:/^.{1,30}$/,inputErrorMessage:"æ ‡é¢˜ä¸èƒ½ä¸ºç©ºä¸”ä¸è¶…è¿‡30ä¸ªå­—ç¬¦"});await c.updateNotebook(e.id,t)}catch(t){t!=="cancel"&&t!=="close"&&g.error("ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•")}},B=async e=>{try{await v.confirm(`ç¡®å®šè¦åˆ é™¤ç¬”è®°æœ¬ "${e.title}" å—ï¼Ÿé‡Œé¢çš„ç¬”è®°ä¹Ÿä¼šè¢«åˆ é™¤å“¦ï¼`,"åˆ é™¤è­¦å‘Š",{confirmButtonText:"ç¡®å®šåˆ é™¤",cancelButtonText:"æˆ‘å†æƒ³æƒ³",type:"warning"}),await c.deleteNotebook(e.id)}catch(t){t!=="cancel"&&t!=="close"&&g.error("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•")}};return(e,t)=>{const _=a("el-button"),T=a("el-skeleton"),E=a("el-empty"),$=a("el-card"),M=a("el-col"),V=a("el-row");return l(),p("div",A,[o("div",O,[o("h2",null,"ðŸ“š æˆ‘çš„ç¬”è®°æœ¬ ("+d(f(u).length)+")",1),r(_,{type:"primary",round:"",onClick:k(N,["prevent"])},{default:n(()=>[...t[0]||(t[0]=[o("i",{class:"iconfont icon-plus",style:{"margin-right":"5px"}},null,-1),y(" æ–°å»ºç¬”è®°æœ¬ ",-1)])]),_:1})]),i.value?(l(),m(T,{key:0,rows:3,animated:""})):z("",!0),!i.value&&f(u).length===0?(l(),m(E,{key:1,description:"è¿™é‡Œç©ºç©ºå¦‚ä¹Ÿï¼Œå¿«åŽ»åˆ›å»ºç¬¬ä¸€ä¸ªç¬”è®°æœ¬å§ï¼"})):(l(),p("div",q,[r(V,{gutter:20},{default:n(()=>[(l(!0),p(I,null,P(f(u),s=>(l(),m(M,{key:s.id,xs:24,sm:12,md:8,lg:6,style:{"margin-bottom":"20px"}},{default:n(()=>[r($,{class:"notebook-card",shadow:"hover",onClick:h=>w(s.id)},{default:n(()=>[o("div",G,[o("div",H,[t[1]||(t[1]=o("i",{class:"iconfont icon-notebook notebook-icon"},null,-1)),o("span",{class:"notebook-title",title:s.title},d(s.title),9,J)])]),o("div",K,[o("div",Q,d(s.noteCounts?s.noteCounts:"0"),1),t[2]||(t[2]=o("div",{class:"count-label"},"ç¯‡ç¬”è®°",-1))]),o("div",U,[o("span",W,d(s.createdAtFriendly),1),o("div",X,[r(_,{link:"",type:"primary",size:"small",onClick:k(h=>C(s),["stop"])},{default:n(()=>[...t[3]||(t[3]=[o("i",{class:"iconfont icon-edit"},null,-1),y(" ç¼–è¾‘ ",-1)])]),_:1},8,["onClick"]),r(_,{link:"",type:"danger",size:"small",onClick:k(h=>B(s),["stop"])},{default:n(()=>[...t[4]||(t[4]=[o("i",{class:"iconfont icon-trash"},null,-1),y(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]))])}}}),ot=L(Y,[["__scopeId","data-v-e752c2f3"]]);export{ot as default};
